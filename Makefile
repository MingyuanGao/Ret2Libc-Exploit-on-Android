# Makefile for ret2libc  

TOOLCHAIN=$(PWD)/arm-linux-androideabi/

CC=$(TOOLCHAIN)/bin/arm-linux-androideabi-gcc
CFLAGS=-g -fno-stack-protector -fPIE -march=armv7-a -mfloat-abi=softfp -mthumb 
LDFLAGS=-Wl,--fix-cortex-a8 -fPIE -pie 

# =======================
default: ret2libc 
	@echo "Build completed!"

ret2libc: set_regs.o ret2libc.o
	$(CC) $(LDFLAGS) -o $@ $^	

set_regs.o: set_regs.s
	$(CC) -c -o $@ $^

# ==========================
# Rules to gernerate objects
%.o: %.c
	$(CC) $(CFLAGS) -c $^ -o $@	

# ==========================
clean:
	rm -rf *.o ret2libc

